%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% This is exercise 3b of lab1, cmput340
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

    %1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6
A =[%a b c d e f g h i g k l m n o p;
     1 1 1 1 0 0 0 0 0 0 0 0 0 0 0 0;
     0 0 0 0 1 1 1 1 0 0 0 0 0 0 0 0;
     0 0 0 0 0 0 0 0 1 1 1 1 0 0 0 0;
     0 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1;
     1 0 0 0 1 0 0 0 1 0 0 0 1 0 0 0;
     0 1 0 0 0 1 0 0 0 1 0 0 0 1 0 0;
     0 0 1 0 0 0 1 0 0 0 1 0 0 0 1 0;
     0 0 0 1 0 0 1 0 1 0 0 0 1 0 0 0;
     1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1;
     0 0 0 0 0 0 0 0 0 0 0 1 0 0 1 0;
     0 0 0 0 0 0 0 1 0 0 1 0 0 1 0 0;
     0 0 1 0 0 1 0 0 1 0 0 0 0 0 0 0;
     0 1 0 0 1 0 0 0 0 0 0 0 0 0 0 0;
     0 0 0 0 0 0 0 0 1 0 0 0 0 1 0 0;
     0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0;
     0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0];
 %rank(A)
 X = [1 3 5 7;2 4 6 8;11 13 15 17;12 14 16 18]; %image X
 x = reshape(X,[16,1]); % reshape image into a column vector x
 b = A*x;
 
 [L,U] = lu(A);
 y = L\b;
 x1 = U\y;
 disp(X);
 disp(reshape(x1,[4,4])); 
 
 